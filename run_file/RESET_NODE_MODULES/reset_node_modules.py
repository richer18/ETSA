import os
import shutil
import subprocess

def run_command(command, cwd=None):
    print(f"‚ñ∂Ô∏è Running: {command}")
    subprocess.run(command, shell=True, check=True, cwd=cwd)

def main():
    project_path = r"C:\xampp\htdocs\ETSA\my-app"

    node_modules = os.path.join(project_path, 'node_modules')
    package_lock = os.path.join(project_path, 'package-lock.json')

    # Delete node_modules
    if os.path.isdir(node_modules):
        print("üßπ Deleting node_modules...")
        shutil.rmtree(node_modules)

    # Delete package-lock.json
    if os.path.isfile(package_lock):
        print("üßπ Deleting package-lock.json...")
        os.remove(package_lock)

    # Run npm commands in project directory
    run_command("npm cache clean --force", cwd=project_path)
    run_command("npm install", cwd=project_path)

    print("‚úÖ Reset complete.")

if __name__ == "__main__":
    main()
